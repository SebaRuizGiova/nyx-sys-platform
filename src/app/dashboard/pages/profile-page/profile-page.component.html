<header class="header">
  <i class="pi pi-angle-left" style="font-size: 1.5rem"></i>
  <div class="header-content">
    <form [formGroup]="userForm">
      <shared-user-dropdown
        position="left-bottom"
        pTooltip="Seleccionar perfil"
        tooltipPosition="right"
        [items]="profilesItems"
        [formGroup]="userForm"
        formControlName="user"
        [userName]="profileData?.name + ' ' + profileData?.lastName"
        [device]="
          profileData?.deviceSN === false
            ? undefined
            : profileData?.deviceSN?.toString()
        "
        [age]="calculateAge(profileData?.birthdate)"
        [status]="profileData?.liveData?.status"
        (dropdownChange)="selectProfile($event)"
      />
    </form>
    <div class="header-actions">
      <div class="buttons-actions">
        {{ periodForm.value.period }}
        <form [formGroup]="periodForm">
          <shared-dropdown
            iconButton="pi-calendar"
            [pTooltip]="'groupPeriodSelect' | translate"
            tooltipPosition="left"
            [showDelay]="400"
            [items]="periodItems"
            [formGroup]="periodForm"
            formControlName="period"
            (dropdownChange)="selectSleepData()"
          />
        </form>
        <div class="group-buttons">
          <shared-button
            icon="pi-plus"
            [tooltipButton]="'adminAddProfileTooltip' | translate"
          />
          <shared-button
            icon="pi-pencil"
            [tooltipButton]="'adminAddProfileTooltip' | translate"
          />
          <shared-button
            icon="pi-trash"
            [tooltipButton]="'adminAddProfileTooltip' | translate"
          />
        </div>
      </div>
      <div class="actions">
        <form [formGroup]="downloadForm">
          <shared-dropdown
            [labelButton]="'groupDownloadReportLabel' | translate"
            iconButton="pi-angle-down"
            [formGroup]="downloadForm"
          >
            <div class="content-dropdown">
              <div class="selects">
                <shared-select
                  [options]="formatDownloadItems || []"
                  [placeholder]="'groupSelectFormatPlaceholder' | translate"
                  [formGroup]="downloadForm"
                  formControlName="format"
                />
                <shared-select
                  [options]="rangeDownloadItems || []"
                  [placeholder]="'groupSelectRangePlaceholder' | translate"
                  [formGroup]="downloadForm"
                  formControlName="range"
                />
              </div>
              <shared-button
                [label]="'groupDownloadLabel' | translate"
                icon="pi-download"
                [disabled]="downloadForm.status === 'INVALID'"
              />
            </div>
          </shared-dropdown>
        </form>
        <form [formGroup]="gmtForm">
          <shared-select
            [options]="gmtItems"
            placeholder="Seleccionar GMT"
            [formGroup]="gmtForm"
            formControlName="gmt"
          />
        </form>
      </div>
    </div>
  </div>
  <i class="pi pi-angle-right" style="font-size: 1.5rem"></i>
</header>
<hr />
<main class="main-content">
  <div class="grid-sup">
    <div class="card sleep-score">
      <div class="card-header">
        <span>Puntuación del sueño</span>
        <i
          class="pi pi-exclamation-circle"
          style="font-size: 1rem; color: #56a7ff"
        ></i>
      </div>
      <hr />
      <div class="card-content">
        <div class="progress">
          <shared-circle-progress-bar
            [sleepScore]="profileData?.selectedSleepData?.sleep_score || 0"
            [xl]="true"
          />
          <p class="desc">
            Es fantástico ver que últimamente has prestado atención a tu sueño
            ¡Sigue así!
          </p>
        </div>
        <div class="graphic-card"></div>
      </div>
    </div>
    <div class="card recovery">
      <div class="card-header">
        <span>Recuperación</span>
        <i
          class="pi pi-exclamation-circle"
          style="font-size: 1rem; color: #56a7ff"
        ></i>
      </div>
      <hr />
      <div class="card-content">
        <div class="data">
          <div class="data-desc">Recuperación total</div>
          <div class="data-value-between">
            {{
              profileData?.selectedSleepData?.hrv_data &&
              profileData?.selectedSleepData?.hrv_data?.length
                ? (profileData?.selectedSleepData)!.hrv_data[0].totalRecovery
                : "No data"
            }}
          </div>
          <div class="data-desc">Recuperación integrada</div>
          <div class="data-value-between">
            {{
              profileData?.selectedSleepData?.hrv_data &&
              (profileData?.selectedSleepData)!.hrv_data!.length > 1
                ? (profileData?.selectedSleepData)!.hrv_data[1]
                    .integratedRecovery + " unidades"
                : "No data"
            }}
          </div>
        </div>
        <div class="alert">
          <i
            class="pi pi-exclamation-circle"
            style="font-size: 1rem; color: #1ee280"
          ></i>
          <p class="alert-desc">
            Tu HRV es mas alto de lo usual. Un Hrv alto indica que tu sistema
            nervioso esta listo para manejar estrés y que tu cuerpo esta en
            balance
          </p>
        </div>
        <div class="graphic-card"></div>
      </div>
    </div>
    <div class="card ans">
      <div class="card-header">
        <span>Balance del Sistema Nervioso Aut.</span>
        <i
          class="pi pi-exclamation-circle"
          style="font-size: 1rem; color: #56a7ff"
        ></i>
      </div>
      <hr />
      <div class="card-content">
        <div class="data">
          <div class="data-desc-progress">Parasimpático (Relajación)</div>
          <div class="data-progress">
            <shared-progress-bar
              [progress]="profileData?.selectedSleepData?.hrv_hf || 0"
              width="75px"
            />
            {{
              profileData?.selectedSleepData?.hrv_hf
                ? profileData?.selectedSleepData?.hrv_hf + "%"
                : "No data"
            }}
          </div>
          <div class="data-desc-progress">Simpático (Estrés)</div>
          <div class="data-progress">
            <shared-progress-bar
              [progress]="profileData?.selectedSleepData?.hrv_lf || 0"
              variant="dark"
              width="75px"
            />
            {{
              profileData?.selectedSleepData?.hrv_lf
                ? profileData?.selectedSleepData?.hrv_lf + "%"
                : "No data"
            }}
          </div>
        </div>
        <div class="alert">
          <i
            class="pi pi-exclamation-circle"
            style="font-size: 1rem; color: #1ee280"
          ></i>
          <p class="alert-desc">
            Tu Ans tiene una inclinación hacia el lado Simpático es decir que tu
            organismo esta preparado para situación de actividad
          </p>
        </div>
        <div class="graphic-card"></div>
      </div>
    </div>
    <div class="card heart-rate-var">
      <div class="card-header">
        <span>Variabilidad del ritmo cardíaco</span>
        <i
          class="pi pi-exclamation-circle"
          style="font-size: 1rem; color: #56a7ff"
        ></i>
      </div>
      <hr />
      <div class="card-content">
        <div class="data">
          <div class="data-desc">Noche</div>
          <div class="data-value-between">
            {{
              profileData?.selectedSleepData?.hrv_rmssd_evening
                ? profileData?.selectedSleepData?.hrv_rmssd_evening + " RMSSD"
                : "No data"
            }}
          </div>
          <div class="data-desc">Mañana</div>
          <div class="data-value-between">
            {{
              profileData?.selectedSleepData?.hrv_rmssd_morning
                ? profileData?.selectedSleepData?.hrv_rmssd_morning + " RMSSD"
                : "No data"
            }}
          </div>
          <div class="data-desc">Promedio</div>
          <div class="data-value-between">
            {{
              profileData?.selectedSleepData?.average_rmssd
                ? profileData?.selectedSleepData?.average_rmssd + " RMSSD"
                : "No data"
            }}
          </div>
        </div>
        <div class="graphic-card"></div>
      </div>
    </div>
    <div class="card heart-rate">
      <div class="card-header">
        <span>Ritmo cardíaco</span>
        <i
          class="pi pi-exclamation-circle"
          style="font-size: 1rem; color: #56a7ff"
        ></i>
      </div>
      <hr />
      <div class="card-content">
        <div class="data">
          <div class="data-desc">Bmp máx.</div>
          <div class="data-value-between">
            {{ profileData?.selectedSleepData?.max_hr || "No data" }}
          </div>
          <div class="data-desc">Bmp en reposo</div>
          <div class="data-value-between">
            {{ profileData?.selectedSleepData?.min_hr || "No data" }}
          </div>
          <div class="data-desc">Bmp promedio</div>
          <div class="data-value-between">
            {{ profileData?.selectedSleepData?.avg_hr || "No data" }}
          </div>
        </div>
        <div class="graphic-card"></div>
      </div>
    </div>
    <div class="card respiratory-rate">
      <div class="card-header">
        <span>Ritmo respiratorio</span>
        <i
          class="pi pi-exclamation-circle"
          style="font-size: 1rem; color: #56a7ff"
        ></i>
      </div>
      <hr />
      <div class="card-content">
        <div class="data">
          <div class="data-desc">Bmp máx.</div>
          <div class="data-value-between">
            {{ profileData?.selectedSleepData?.max_rr || "No data" }}
          </div>
          <div class="data-desc">Bmp en reposo</div>
          <div class="data-value-between">
            {{ profileData?.selectedSleepData?.min_rr || "No data" }}
          </div>
          <div class="data-desc">Bmp promedio</div>
          <div class="data-value-between">
            {{ profileData?.selectedSleepData?.avg_rr || "No data" }}
          </div>
        </div>
        <div class="graphic-card"></div>
      </div>
    </div>
    <div class="card movement">
      <div class="card-header">
        <span>Movimiento</span>
        <i
          class="pi pi-exclamation-circle"
          style="font-size: 1rem; color: #56a7ff"
        ></i>
      </div>
      <hr />
      <div class="card-content">
        <div class="data">
          <div class="data-desc">Movimientos y giros</div>
          <div class="data-value-between">
            {{ profileData?.selectedSleepData?.tossnturn_count || "No data" }}
          </div>
          <div class="data-desc">Promedio de actividad</div>
          <div class="data-value-between">
            {{ profileData?.selectedSleepData?.avg_act || "No data" }}
          </div>
        </div>
        <div class="graphic-card"></div>
      </div>
    </div>
    <div class="card sleep-time">
      <div class="card-header">
        <span>Tiempo de sueño</span>
        <i
          class="pi pi-exclamation-circle"
          style="font-size: 1rem; color: #56a7ff"
        ></i>
      </div>
      <hr />
      <div class="card-content">
        <div class="data-grid">
          <div class="data-desc">En la cama</div>
          <div class="data-value">
            {{ profileData?.selectedSleepData?.duration_in_bed || "No data" }}
          </div>
          <div class="data-desc">Durmiendo</div>
          <div class="data-progress">
            <shared-progress-bar [progress]="91" width="75px" />
            {{
              profileData?.selectedSleepData?.duration_in_sleep
                ? profileData?.selectedSleepData?.duration_in_sleep +
                  " (" +
                  profileData?.selectedSleepData?.duration_in_sleep_percent +
                  ")"
                : "No data"
            }}
          </div>
          <div class="data-desc">Despierto</div>
          <div class="data-progress">
            <shared-progress-bar [progress]="9" variant="dark" width="75px" />
            {{
              profileData?.selectedSleepData?.duration_awake
                ? profileData?.selectedSleepData?.duration_awake +
                  " (" +
                  profileData?.selectedSleepData?.duration_awake_percent +
                  ")"
                : "No data"
            }}
          </div>
        </div>
        <div class="graphic-card"></div>
      </div>
    </div>
    <div class="card graphic">Graphic</div>
    <div class="card sleep-arq">
      <div class="card-header">
        <span>Arquitectura del sueño</span>
        <i
          class="pi pi-exclamation-circle"
          style="font-size: 1rem; color: #56a7ff"
        ></i>
      </div>
      <hr />
      <div class="card-content">
        <div class="data-grid">
          <div class="data-desc">Ligero</div>
          <div class="data-progress">
            <shared-progress-bar [progress]="56" width="75px" />
            {{
              profileData?.selectedSleepData?.duration_in_light
                ? profileData?.selectedSleepData?.duration_in_light +
                  " (" +
                  profileData?.selectedSleepData?.duration_in_light_percent +
                  ")"
                : "No data"
            }}
          </div>
          <div class="data-desc">Profundo</div>
          <div class="data-progress">
            <shared-progress-bar [progress]="24" width="75px" />
            {{
              profileData?.selectedSleepData?.duration_in_deep
                ? profileData?.selectedSleepData?.duration_in_deep +
                  " (" +
                  profileData?.selectedSleepData?.duration_in_deep_percent +
                  ")"
                : "No data"
            }}
          </div>
          <div class="data-desc">REM</div>
          <div class="data-progress">
            <shared-progress-bar [progress]="20" variant="dark" width="75px" />
            {{
              profileData?.selectedSleepData?.duration_in_rem
                ? profileData?.selectedSleepData?.duration_in_rem +
                  " (" +
                  profileData?.selectedSleepData?.duration_in_rem_percent +
                  ")"
                : "No data"
            }}
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- <div class="grid-inf">
    <div class="card heart-rate-var">
      <div class="card-header">
        <span>Variabilidad del ritmo cardíaco</span>
      </div>
      <hr />
      <div class="card-content">
        <div class="graphic-card"></div>
      </div>
    </div>
    <div class="card graphic">Graphic</div>
    <div class="card movement">
      <div class="card-header">
        <span>Movimiento</span>
      </div>
      <hr />
      <div class="card-content">
        <div class="graphic-card"></div>
      </div>
    </div>
  </div> -->
  <!-- <app-bar-chart /> -->
</main>
