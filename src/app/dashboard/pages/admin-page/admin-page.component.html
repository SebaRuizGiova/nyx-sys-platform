<div class="admin-content">
  <div class="users-filter">
    <shared-select
      *ngIf="userRole === 'superAdmin'"
      [showClear]="true"
      [options]="usersItems"
      [placeholder]="'adminUsersFilterPlaceholder' | translate"
      [formGroup]="filterByUserForm"
      formControlName="userId"
      (selectChange)="filterDataByUser($event)"
      (selectClear)="filterDataByUser()"
    />
  </div>
  <div class="cards-container">
    <!-- PERFILES -->
    <div class="card">
      <div class="card-header">
        <p class="title-table">{{ "adminProfilesTitle" | translate }}</p>
        <div class="actions-header" [formGroup]="actionsProfilesForm">
          <div class="icon" *ngIf="dontShowHiddenProfiles; else showProfiles">
            <i
              class="pi pi-eye"
              style="font-size: 1.6rem"
              [pTooltip]="'adminShowAllProfilesTooltip' | translate"
              tooltipPosition="bottom"
              (click)="toggleHiddenProfiles()"
            ></i>
          </div>
          <ng-template #showProfiles>
            <div class="icon">
              <i
                class="pi pi-eye-slash"
                style="font-size: 1.6rem"
                [pTooltip]="'adminHideAllProfilesTooltip' | translate"
                tooltipPosition="bottom"
                (click)="toggleHiddenProfiles()"
              ></i>
            </div>
          </ng-template>
          <shared-button
            icon="pi-plus"
            [tooltipButton]="'adminAddProfileTooltip' | translate"
            (click)="toggleAddProfile(true)"
          />
          <span class="p-input-icon-right">
            <input
              type="text"
              pInputText
              formControlName="search"
              [placeholder]="'adminSearchPlaceholder' | translate"
              (input)="filterProfiles()"
            />
            <i class="pi pi-search"></i>
          </span>
          <shared-select
            [options]="groupsItemsFilter"
            [placeholder]="'adminFilterPlaceholder' | translate"
            [formGroup]="actionsProfilesForm"
            formControlName="filterByGroup"
            (selectChange)="filterProfiles()"
            [showClear]="true"
          />
        </div>
      </div>
      <p-table
        [value]="filteredProfiles"
        styleClass="p-datatable-sm"
        [paginator]="true"
        [rows]="10"
      >
        <ng-template pTemplate="header">
          <tr>
            <th>{{ "adminColumnName" | translate }}</th>
            <th class="column-center">
              {{ "adminColumnLastName" | translate }}
            </th>
            <th></th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-profile>
          <tr>
            <td [style]="profile.hided ? 'color: #7c7c7c' : ''">
              {{ profile.name }}
            </td>
            <td
              class="column-center"
              [style]="profile.hided ? 'color: #7c7c7c' : ''"
            >
              {{ profile.lastName }}
            </td>
            <td
              class="column-rigth"
              [style]="profile.hided ? 'color: #7c7c7c' : ''"
            >
              <div class="actions">
                <i
                  *ngIf="profile.hided; else showProfile"
                  class="pi pi-eye-slash"
                  [pTooltip]="'adminShowProfileTooltip' | translate"
                  tooltipPosition="bottom"
                  (click)="
                    hideProfile(profile.userID, profile.id, profile.hided)
                  "
                ></i>
                <ng-template #showProfile>
                  <i
                    class="pi pi-eye"
                    [pTooltip]="'adminHideProfileTooltip' | translate"
                    tooltipPosition="bottom"
                    (click)="
                      hideProfile(profile.userID, profile.id, profile.hided)
                    "
                  ></i>
                </ng-template>
                <i
                  class="pi pi-user-edit"
                  [pTooltip]="'adminEditProfileTooltip' | translate"
                  tooltipPosition="bottom"
                  (click)="toggleEditProfile(profile)"
                ></i>
                <i
                  class="pi pi-trash"
                  [pTooltip]="'adminDeleteProfileTooltip' | translate"
                  tooltipPosition="bottom"
                  (click)="
                    toggleConfirmDeleteProfile(profile.userID, profile.id)
                  "
                ></i>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>

    <!-- DISPOSITIVOS -->
    <div class="card">
      <div class="card-header">
        <p class="title-table">{{ "adminDevicesTitle" | translate }}</p>
        <div class="actions-header" [formGroup]="actionsDevicesForm">
          <div class="icon" *ngIf="dontShowHiddenDevices; else showDevices">
            <i
              class="pi pi-eye"
              style="font-size: 1.6rem"
              [pTooltip]="'adminShowAllDevicesTooltip' | translate"
              tooltipPosition="bottom"
              (click)="toggleHiddenDevices()"
            ></i>
          </div>
          <ng-template #showDevices>
            <div class="icon">
              <i
                class="pi pi-eye-slash"
                style="font-size: 1.6rem"
                [pTooltip]="'adminHideAllDevicesTooltip' | translate"
                tooltipPosition="bottom"
                (click)="toggleHiddenDevices()"
              ></i>
            </div>
          </ng-template>
          <shared-button
            icon="pi-plus"
            [tooltipButton]="'adminAddDeviceTooltip' | translate"
            (click)="toggleAddDevice(true)"
          />
          <span class="p-input-icon-right">
            <input
              type="text"
              pInputText
              formControlName="search"
              [placeholder]="'adminSearchPlaceholder' | translate"
              (input)="filterDevices()"
            />
            <i class="pi pi-search"></i>
          </span>
          <shared-select
            [options]="groupsItemsFilter"
            [placeholder]="'adminFilterPlaceholder' | translate"
            [formGroup]="actionsProfilesForm"
            formControlName="filterByGroup"
            (selectChange)="filterDevices()"
            [showClear]="true"
          />
        </div>
      </div>
      <p-table
        [value]="filteredDevices"
        styleClass="p-datatable-sm"
        [paginator]="true"
        [rows]="10"
      >
        <ng-template pTemplate="header">
          <tr>
            <th>{{ "adminColumnSerialNumber" | translate }}</th>
            <th>{{ "adminColumnLinked" | translate }}</th>
            <th>{{ "adminColumnStatus" | translate }}</th>
            <th></th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-device>
          <tr>
            <td>{{ device.serialNumber }}</td>
            <td>
              {{
                device.playerName
                  ? device.playerName
                  : ("adminNotLinked" | translate)
              }}
            </td>
            <td>{{ device.status }}</td>
            <td class="column-rigth">
              <div class="actions">
                <i
                  class="pi pi-cog"
                  [pTooltip]="'adminEditDeviceTooltip' | translate"
                  tooltipPosition="bottom"
                  (click)="toggleEditDevice(device)"
                ></i>
                <i
                  class="pi pi-trash"
                  [pTooltip]="'adminDeleteDeviceTooltip' | translate"
                  tooltipPosition="bottom"
                  (click)="toggleConfirmDeleteDevice(device.userID, device.id)"
                ></i>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>

    <!-- GRUPOS -->
    <div class="card">
      <div class="card-header">
        <p class="title-table">{{ "adminGroupsTitle" | translate }}</p>
        <div class="actions-header" [formGroup]="actionsGroupsForm">
          <div class="icon" *ngIf="dontShowHiddenGroups; else showGroups">
            <i
              class="pi pi-eye"
              style="font-size: 1.6rem"
              [pTooltip]="'adminShowAllGroupsTooltip' | translate"
              tooltipPosition="bottom"
              (click)="toggleHiddenGroups()"
            ></i>
          </div>
          <ng-template #showGroups>
            <div class="icon">
              <i
                class="pi pi-eye-slash"
                style="font-size: 1.6rem"
                [pTooltip]="'adminHideAllGroupsTooltip' | translate"
                tooltipPosition="bottom"
                (click)="toggleHiddenGroups()"
              ></i>
            </div>
          </ng-template>
          <shared-button
            icon="pi-plus"
            [tooltipButton]="'adminAddGroupTooltip' | translate"
            (click)="toggleAddGroup(true)"
          />
          <span class="p-input-icon-right">
            <input
              type="text"
              pInputText
              formControlName="search"
              [placeholder]="'adminSearchPlaceholder' | translate"
              (input)="filterGroups()"
            />
            <i class="pi pi-search"></i>
          </span>
        </div>
      </div>
      <p-table
        [value]="filteredGroups"
        styleClass="p-datatable-sm"
        [paginator]="true"
        [rows]="10"
      >
        <ng-template pTemplate="header">
          <tr>
            <th>{{ "adminColumnName" | translate }}</th>
            <th></th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-group>
          <tr>
            <td [style]="group.hided ? 'color: #7c7c7c' : ''">
              {{ group.teamName }}
            </td>
            <td
              class="column-rigth"
              [style]="group.hided ? 'color: #7c7c7c' : ''"
            >
              <div class="actions">
                <i
                  *ngIf="group.hided; else showGroup"
                  class="pi pi-eye-slash"
                  [pTooltip]="'adminShowGroupTooltip' | translate"
                  tooltipPosition="bottom"
                  (click)="hideGroup(group.userID, group.id, group.hided)"
                ></i>
                <ng-template #showGroup>
                  <i
                    class="pi pi-eye"
                    [pTooltip]="'adminHideGroupTooltip' | translate"
                    tooltipPosition="bottom"
                    (click)="hideGroup(group.userID, group.id, group.hided)"
                  ></i>
                </ng-template>
                <i
                  class="pi pi-user-edit"
                  [pTooltip]="'adminEditGroupTooltip' | translate"
                  tooltipPosition="bottom"
                  (click)="toggleEditGroup(group)"
                ></i>
                <i
                  class="pi pi-trash"
                  [pTooltip]="'adminDeleteGroupTooltip' | translate"
                  tooltipPosition="bottom"
                  (click)="toggleConfirmDeleteGroup(group.userID, group.id)"
                ></i>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>

    <!-- COLABORADORES -->
    <div class="card">
      <div class="card-header">
        <p class="title-table">{{ "adminCollaboratorsTitle" | translate }}</p>
        <div class="actions-header" [formGroup]="actionsCollaboratorsForm">
          <shared-button
            icon="pi-plus"
            [tooltipButton]="'adminAddCollaboratorTooltip' | translate"
            (click)="toggleAddCollaborator(true)"
          />
          <span class="p-input-icon-right">
            <input
              type="text"
              pInputText
              formControlName="search"
              [placeholder]="'adminSearchPlaceholder' | translate"
              (input)="filterCollaborators()"
            />
            <i class="pi pi-search"></i>
          </span>
        </div>
      </div>
      <p-table
        [value]="filteredCollaborators"
        styleClass="p-datatable-sm"
        [paginator]="true"
        [rows]="10"
      >
        <ng-template pTemplate="header">
          <tr>
            <th>{{ "adminColumnName" | translate }}</th>
            <th>{{ "adminColumnLinked" | translate }}</th>
            <th>{{ "adminColumnRole" | translate }}</th>
            <th></th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-collaborator>
          <tr>
            <td>{{ collaborator.nickName }}</td>
            <td>{{ collaborator.linked }}</td>
            <td>{{ collaborator.role | titlecase }}</td>
            <td class="column-rigth">
              <div class="actions">
                <i
                  class="pi pi-user-edit"
                  [pTooltip]="'adminEditCollaboratorTooltip' | translate"
                  tooltipPosition="bottom"
                  (click)="toggleEditCollaborator(collaborator)"
                ></i>
                <i
                  class="pi pi-trash"
                  [pTooltip]="'adminDeleteCollaboratorTooltip' | translate"
                  tooltipPosition="bottom"
                  (click)="
                    toggleConfirmDeleteCollaborator(
                      collaborator,
                      collaborator?.accessTo[0]?.id,
                      collaborator.id
                    )
                  "
                ></i>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>

    <!-- USUARIOS -->
    <div class="card" *ngIf="userRole === 'superAdmin'">
      <div class="card-header">
        <p class="title-table">{{ "adminUsersTitle" | translate }}</p>
        <div class="actions-header" [formGroup]="actionsUsersForm">
          <shared-button
            icon="pi-plus"
            [tooltipButton]="'adminAddUserTooltip' | translate"
            (click)="toggleAddUser(true)"
          />
          <span class="p-input-icon-right">
            <input
              type="text"
              pInputText
              formControlName="search"
              [placeholder]="'adminSearchPlaceholder' | translate"
              (input)="filterUsers()"
            />
            <i class="pi pi-search"></i>
          </span>
        </div>
      </div>
      <p-table
        [value]="filteredUsers"
        styleClass="p-datatable-sm"
        [paginator]="true"
        [rows]="10"
      >
        <ng-template pTemplate="header">
          <tr>
            <th>{{ "adminColumnName" | translate }}</th>
            <th></th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-user>
          <tr>
            <td>{{ user.nickName }}</td>
            <td class="column-rigth">
              <div class="actions">
                <i
                  class="pi pi-user-edit"
                  [pTooltip]="'adminEditUserTooltip' | translate"
                  tooltipPosition="bottom"
                  (click)="toggleEditUser(user)"
                ></i>
                <i
                  class="pi pi-trash"
                  [pTooltip]="'adminDeleteUserTooltip' | translate"
                  tooltipPosition="bottom"
                  (click)="toggleConfirmDeleteUser(user)"
                ></i>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>

<p-toast></p-toast>

<!-- MODAL AÑADIR PERFIL -->
<shared-modal
  [showModal]="showAddProfile"
  [title]="
    (enableEditProfile ? 'adminEditProfileTitle' : 'adminAddProfileTitle')
      | translate
  "
  width="25vw"
  (onCloseEvent)="onCloseModalProfile()"
>
  <div class="modal-content" [formGroup]="addProfileForm">
    <shared-input-text
      [formGroup]="addProfileForm"
      formControlName="name"
      [placeholder]="'adminModalAddProfileName' | translate"
      [error]="!!validateInputs(addProfileForm, 'name')"
      [helper]="validateInputs(addProfileForm, 'name')"
    />
    <shared-input-text
      [formGroup]="addProfileForm"
      formControlName="lastName"
      [placeholder]="'adminModalAddProfileLastname' | translate"
      [error]="!!validateInputs(addProfileForm, 'lastName')"
      [helper]="validateInputs(addProfileForm, 'lastName')"
    />
    <p-calendar
      formControlName="birthdate"
      dateFormat="dd/mm/yy"
      [placeholder]="'adminModalAddProfileBirthDate' | translate"
      [showIcon]="true"
      [ngClass]="{
        'ng-invalid': !!validateInputs(addProfileForm, 'birthdate'),
        'ng-dirty': !!validateInputs(addProfileForm, 'birthdate')
      }"
    />
    <shared-select
      [options]="genderItems"
      [placeholder]="'adminModalAddProfileGender' | translate"
      [formGroup]="addProfileForm"
      formControlName="sex"
      [error]="!!validateInputs(addProfileForm, 'sex')"
    />
    <p-dropdown
      [options]="countriesItems"
      optionLabel="label"
      optionValue="value"
      [placeholder]="'adminModalAddProfileBirthplace' | translate"
      formControlName="birthplace"
      [ngClass]="{
        'ng-invalid': !!validateInputs(addProfileForm, 'birthplace'),
        'ng-dirty': !!validateInputs(addProfileForm, 'birthplace')
      }"
    >
      <ng-template pTemplate="selectedItem">
        <div class="dropdown-item" *ngIf="addProfileForm.value.birthplace">
          <div>{{ addProfileForm.value.birthplace.name }}</div>
        </div>
      </ng-template>
      <ng-template let-country pTemplate="item">
        <div class="dropdown-item">
          <img [src]="country.img" style="width: 18px" />
          <div>{{ country.label }}</div>
        </div>
      </ng-template>
    </p-dropdown>
    <shared-select
      *ngIf="userRole === 'superAdmin'"
      [options]="usersItems"
      [placeholder]="'adminModalAddProfileUser' | translate"
      [formGroup]="addProfileForm"
      formControlName="userID"
      (selectChange)="selectUserProfile($event)"
      [error]="!!validateInputs(addProfileForm, 'userID')"
    />
    <shared-select
      [options]="groupsItems"
      [placeholder]="'adminModalAddProfileGroup' | translate"
      [formGroup]="addProfileForm"
      formControlName="teamID"
      [error]="!!validateInputs(addProfileForm, 'teamID')"
    />
    <div class="buttons-modal">
      <shared-button
        [label]="'adminModalSave' | translate"
        (click)="addOrEditProfile()"
        [disabled]="addProfileForm.status === 'INVALID'"
      />
      <shared-button
        [label]="'adminModalCancel' | translate"
        variant="secondary"
        (click)="toggleAddProfile(false)"
      />
    </div>
  </div>
</shared-modal>

<!-- MODAL CONFIRMAR ELIMINAR PERFIL -->
<shared-modal
  [showModal]="showConfirmDeleteProfile"
  [title]="'settingsConfirmModalTitle' | translate"
  width="20vw"
>
  <div class="modal-content">
    <div class="alert">
      <i
        class="pi pi-exclamation-triangle"
        style="color: #d71d1d; font-size: 2rem"
      ></i>
    </div>
    <p>{{ "IrreversibleAction" | translate }}</p>
  </div>
  <div class="buttons-modal">
    <shared-button
      [label]="'settingsConfirmModalAccept' | translate"
      (click)="deleteProfile()"
    />
    <shared-button
      [label]="'settingsConfirmModalCancel' | translate"
      variant="secondary"
      (click)="toggleConfirmDeleteProfile()"
    />
  </div>
</shared-modal>

<!-- MODAL AÑADIR DISPOSITIVO -->
<shared-modal
  [showModal]="showAddDevice"
  [title]="
    (enableEditProfile ? 'adminEditDeviceTitle' : 'adminAddDeviceTitle')
      | translate
  "
  width="25vw"
  (onCloseEvent)="onCloseModalDevice()"
>
  <div class="modal-content" [formGroup]="addDeviceForm">
    <p class="legend">{{ "adminExplanationDevice" | translate }}</p>
    <shared-input-text
      [formGroup]="addDeviceForm"
      formControlName="serialNumber"
      [placeholder]="'adminModalAddDeviceSerialNumber' | translate"
      [error]="!!validateInputs(addDeviceForm, 'serialNumber')"
      [helper]="validateInputs(addDeviceForm, 'serialNumber')"
      (inputChange)="validateDeviceSerialNumber($event)"
    />
    <shared-input-text
      [formGroup]="addDeviceForm"
      formControlName="verificationCode"
      [placeholder]="'adminModalAddDeviceCode' | translate"
      [error]="!!validateInputs(addDeviceForm, 'verificationCode')"
      [helper]="validateInputs(addDeviceForm, 'verificationCode')"
    />
    <shared-select
      *ngIf="userRole === 'superAdmin'"
      [options]="usersItems"
      [placeholder]="'adminModalAddDeviceUser' | translate"
      [formGroup]="addDeviceForm"
      formControlName="userID"
      (selectChange)="selectUserDevice($event)"
      [error]="!!validateInputs(addDeviceForm, 'userID')"
    />
    <shared-select
      [options]="profilesItems"
      [placeholder]="'adminModalAddDeviceProfile' | translate"
      [formGroup]="addDeviceForm"
      formControlName="playerID"
      [error]="!!validateInputs(addDeviceForm, 'playerID')"
      [showClear]="true"
      (selectChange)="selectPlayerLinked($event)"
    />
    <div class="buttons-modal">
      <shared-button
        [label]="'adminModalSave' | translate"
        (click)="addOrEditDevice()"
        [disabled]="addDeviceForm.status === 'INVALID'"
      />
      <shared-button
        [label]="'adminModalCancel' | translate"
        variant="secondary"
        (click)="toggleAddDevice(false)"
      />
    </div>
  </div>
</shared-modal>

<!-- MODAL CONFIRMAR ELIMINAR DISPOSITIVO -->
<shared-modal
  [showModal]="showConfirmDeleteDevice"
  [title]="'settingsConfirmModalTitle' | translate"
  width="20vw"
>
  <div class="modal-content">
    <div class="alert">
      <i
        class="pi pi-exclamation-triangle"
        style="color: #d71d1d; font-size: 2rem"
      ></i>
    </div>
    <p>{{ "IrreversibleAction" | translate }}</p>
  </div>
  <div class="buttons-modal">
    <shared-button
      [label]="'settingsConfirmModalAccept' | translate"
      (click)="deleteDevice()"
    />
    <shared-button
      [label]="'settingsConfirmModalCancel' | translate"
      variant="secondary"
      (click)="toggleConfirmDeleteDevice()"
    />
  </div>
</shared-modal>

<!-- MODAL AÑADIR GRUPO -->
<shared-modal
  [showModal]="showAddGroup"
  [title]="
    (enableEditProfile ? 'adminEditGroupTitle' : 'adminAddGroupTitle')
      | translate
  "
  width="25vw"
  (onCloseEvent)="onCloseModalGroup()"
>
  <div class="modal-content" [formGroup]="addGroupForm">
    <shared-input-text
      [formGroup]="addGroupForm"
      formControlName="teamName"
      [placeholder]="'adminModalAddGroupName' | translate"
      [error]="!!validateInputs(addGroupForm, 'teamName')"
      [helper]="validateInputs(addGroupForm, 'teamName')"
      (inputChange)="validateGroupName($event)"
    />
    <shared-select
      [options]="gmtItems"
      [placeholder]="'adminModalAddGroupGMT' | translate"
      [formGroup]="addGroupForm"
      formControlName="gmt"
      [error]="!!validateInputs(addGroupForm, 'gmt')"
    />
    <shared-select
      *ngIf="userRole === 'superAdmin' && !enableEditProfile"
      [options]="usersItems"
      [placeholder]="'adminModalAddGroupUser' | translate"
      [formGroup]="addGroupForm"
      formControlName="userID"
      [error]="!!validateInputs(addGroupForm, 'userID')"
    />
    <div class="buttons-modal">
      <shared-button
        [label]="'adminModalSave' | translate"
        (click)="addOrEditGroup()"
        [disabled]="addGroupForm.status === 'INVALID'"
      />
      <shared-button
        [label]="'adminModalCancel' | translate"
        variant="secondary"
        (click)="toggleAddGroup(false)"
      />
    </div>
  </div>
</shared-modal>

<!-- MODAL CONFIRMAR ELIMINAR PERFILES DEL GRUPO -->
<shared-modal
  [showModal]="showConfirmDeleteProfilesByGroup"
  [title]="'settingsConfirmModalTitle' | translate"
  width="20vw"
>
  <div class="modal-content">
    <div class="alert">
      <i
        class="pi pi-exclamation-triangle"
        style="color: #d71d1d; font-size: 2rem"
      ></i>
    </div>
    <p>{{ "IrreversibleAction" | translate }}</p>
  </div>
  <div class="buttons-modal">
    <shared-button
      [label]="'settingsConfirmModalAccept' | translate"
      (click)="toggleConfirmDeleteProfilesGroup()"
    />
    <shared-button
      [label]="'settingsConfirmModalCancel' | translate"
      variant="secondary"
      (click)="toggleConfirmDeleteProfilesGroup(true)"
    />
  </div>
</shared-modal>

<!-- MODAL CONFIRMAR ELIMINAR GRUPO -->
<shared-modal
  [showModal]="showConfirmDeleteGroup"
  [title]="'settingsConfirmModalTitle' | translate"
  width="20vw"
>
  <div class="modal-content">
    <div class="alert">
      <i
        class="pi pi-exclamation-triangle"
        style="color: #d71d1d; font-size: 2rem"
      ></i>
    </div>
    <p>{{ "IrreversibleAction" | translate }}</p>
    <form [formGroup]="deleteGroupForm" class="checkbox-container">
      <div class="checkbox">
        <p-checkbox
          formControlName="deleteProfiles"
          [binary]="true"
          inputId="deleteProfiles"
          (onChange)="toggleConfirmDeleteProfilesGroup()"
        ></p-checkbox>
        <label for="deleteProfiles">{{
          "adminDeleteProfilesByGroup" | translate
        }}</label>
      </div>
      <div class="checkbox">
        <p-checkbox
          formControlName="deleteDevices"
          [binary]="true"
          inputId="deleteDevices"
          (onChange)="toggleConfirmDeleteProfilesGroup()"
        ></p-checkbox>
        <label for="deleteDevices">{{
          "adminDeleteDevicesByGroup" | translate
        }}</label>
      </div>
    </form>
  </div>
  <div class="buttons-modal">
    <shared-button
      [label]="'settingsConfirmModalAccept' | translate"
      (click)="deleteGroup()"
    />
    <shared-button
      [label]="'settingsConfirmModalCancel' | translate"
      variant="secondary"
      (click)="toggleConfirmDeleteGroup()"
    />
  </div>
</shared-modal>

<!-- MODAL AÑADIR COLABORADOR -->
<shared-modal
  [showModal]="showAddCollaborator"
  [title]="'adminAddCollaboratorTitle' | translate"
  width="25vw"
  (onCloseEvent)="onCloseModalAddCollaborator()"
>
  <div class="modal-content" [formGroup]="addCollaboratorForm">
    <p class="legend">{{ "adminExplanationCollaborator" | translate }}</p>
    <shared-input-text
      [formGroup]="addCollaboratorForm"
      formControlName="email"
      [placeholder]="'adminModalAddCollaboratorEmail' | translate"
      [error]="!!validateInputs(addCollaboratorForm, 'email')"
      [helper]="validateInputs(addCollaboratorForm, 'email')"
      (inputChange)="validateEmailCollaborator($event)"
    />
    <shared-input-password
      [placeholder]="'adminModalAddCollaboratorPassword' | translate"
      [formGroup]="addCollaboratorForm"
      formControlName="password"
      [error]="!!validateInputs(addCollaboratorForm, 'password')"
      [helper]="validateInputs(addCollaboratorForm, 'password')"
      (inputChange)="
        validatePasswordsCollaborator(
          $event,
          addCollaboratorForm.value.confirmPassword
        )
      "
    />
    <shared-input-password
      [placeholder]="'adminModalAddCollaboratorConfirmPassword' | translate"
      [formGroup]="addCollaboratorForm"
      formControlName="confirmPassword"
      [error]="!!validateInputs(addCollaboratorForm, 'confirmPassword')"
      [helper]="validateInputs(addCollaboratorForm, 'confirmPassword')"
      (inputChange)="
        validatePasswordsCollaborator(
          addCollaboratorForm.value.password,
          $event
        )
      "
    />
    <shared-input-text
      [formGroup]="addCollaboratorForm"
      formControlName="nickName"
      [placeholder]="'adminModalAddCollaboratorAlias' | translate"
      [error]="!!validateInputs(addCollaboratorForm, 'nickName')"
      [helper]="validateInputs(addCollaboratorForm, 'nickName')"
    />
    <shared-select
      [options]="roleCollaboratorItems"
      [placeholder]="'adminModalAddCollaboratorRole' | translate"
      [formGroup]="addCollaboratorForm"
      formControlName="role"
      [error]="!!validateInputs(addCollaboratorForm, 'role')"
    />
    <shared-select
      *ngIf="userRole === 'superAdmin'"
      [options]="usersItems"
      [placeholder]="'adminModalAddCollaboratorUser' | translate"
      [formGroup]="addCollaboratorForm"
      formControlName="UID"
      [error]="!!validateInputs(addCollaboratorForm, 'UID')"
    />
    <div class="buttons-modal">
      <shared-button
        [label]="'adminModalSave' | translate"
        (click)="addCollaborator()"
        [disabled]="addCollaboratorForm.status === 'INVALID'"
      />
      <shared-button
        [label]="'adminModalCancel' | translate"
        variant="secondary"
        (click)="toggleAddCollaborator(false)"
      />
    </div>
  </div>
</shared-modal>

<!-- MODAL EDITAR COLABORADOR -->
<shared-modal
  [showModal]="showEditCollaborator"
  [title]="'adminEditCollaboratorTitle' | translate"
  width="25vw"
  (onCloseEvent)="onCloseModalEditCollaborator()"
>
  <div class="modal-content" [formGroup]="editCollaboratorForm">
    <p>{{ "adminExplanationCollaborator" | translate }}</p>
    <shared-input-text
      [formGroup]="editCollaboratorForm"
      formControlName="nickName"
      [placeholder]="'adminModalAddCollaboratorAlias' | translate"
      [error]="!!validateInputs(editCollaboratorForm, 'nickName')"
      [helper]="validateInputs(editCollaboratorForm, 'nickName')"
    />
    <shared-select
      [options]="roleCollaboratorItems"
      [placeholder]="'adminModalAddCollaboratorRole' | translate"
      [formGroup]="editCollaboratorForm"
      formControlName="role"
      [error]="!!validateInputs(editCollaboratorForm, 'role')"
    />
    <div class="buttons-modal">
      <shared-button
        [label]="'adminModalSave' | translate"
        (click)="editCollaborator()"
        [disabled]="editCollaboratorForm.status === 'INVALID'"
      />
      <shared-button
        [label]="'adminModalCancel' | translate"
        variant="secondary"
        (click)="toggleEditCollaborator()"
      />
    </div>
  </div>
</shared-modal>

<!-- MODAL CONFIRMAR ELIMINAR COLABORADOR -->
<shared-modal
  [showModal]="showConfirmDeleteCollaborator"
  [title]="'settingsConfirmModalTitle' | translate"
  width="20vw"
>
  <div class="modal-content">
    <div class="alert">
      <i
        class="pi pi-exclamation-triangle"
        style="color: #d71d1d; font-size: 2rem"
      ></i>
    </div>
    <p>{{ "IrreversibleAction" | translate }}</p>
  </div>
  <div class="buttons-modal">
    <shared-button
      [label]="'settingsConfirmModalAccept' | translate"
      (click)="deleteCollaborator()"
    />
    <shared-button
      [label]="'settingsConfirmModalCancel' | translate"
      variant="secondary"
      (click)="toggleConfirmDeleteCollaborator()"
    />
  </div>
</shared-modal>

<!-- MODAL AÑADIR USUARIO -->
<shared-modal
  [showModal]="showAddUser"
  [title]="'adminAddUserTitle' | translate"
  width="25vw"
  (onCloseEvent)="onCloseModalAddUser()"
>
  <div class="modal-content" [formGroup]="addUserForm">
    <shared-input-text
      [formGroup]="addUserForm"
      formControlName="email"
      [placeholder]="'adminModalAddUserEmail' | translate"
      [error]="!!validateInputs(addUserForm, 'email')"
      [helper]="validateInputs(addUserForm, 'email')"
      (inputChange)="validateEmailUser($event)"
    />
    <shared-input-text
      [formGroup]="addUserForm"
      formControlName="nickName"
      [placeholder]="'adminModalAddUserAlias' | translate"
      [error]="!!validateInputs(addUserForm, 'nickName')"
      [helper]="validateInputs(addUserForm, 'nickName')"
    />
    <shared-select
      [options]="roleUserItems"
      [placeholder]="'adminModalAddUserRole' | translate"
      [formGroup]="addUserForm"
      formControlName="role"
      [error]="!!validateInputs(addUserForm, 'role')"
    />
    <div class="buttons-modal">
      <shared-button
        [label]="'adminModalSave' | translate"
        (click)="addUser()"
        [disabled]="addUserForm.status === 'INVALID'"
      />
      <shared-button
        [label]="'adminModalCancel' | translate"
        variant="secondary"
        (click)="toggleAddUser(false)"
      />
    </div>
  </div>
</shared-modal>

<!-- MODAL EDITAR USUARIO -->
<shared-modal
  [showModal]="showEditUser"
  [title]="'adminEditUserTitle' | translate"
  width="25vw"
  (onCloseEvent)="onCloseModalEditUser()"
>
  <div class="modal-content" [formGroup]="editUserForm">
    <shared-input-text
      [formGroup]="editUserForm"
      formControlName="nickName"
      [placeholder]="'adminModalAddUserAlias' | translate"
      [error]="!!validateInputs(editUserForm, 'nickName')"
      [helper]="validateInputs(editUserForm, 'nickName')"
    />
    <shared-select
      [options]="roleUserItems"
      [placeholder]="'adminModalAddUserRole' | translate"
      [formGroup]="editUserForm"
      formControlName="role"
      [error]="!!validateInputs(editUserForm, 'role')"
    />
    <div class="buttons-modal">
      <shared-button
        [label]="'adminModalSave' | translate"
        (click)="editUser()"
        [disabled]="editUserForm.status === 'INVALID'"
      />
      <shared-button
        [label]="'adminModalCancel' | translate"
        variant="secondary"
        (click)="toggleEditUser()"
      />
    </div>
  </div>
</shared-modal>

<!-- MODAL CONFIRMAR ELIMINAR USUARIO -->
<shared-modal
  [showModal]="showConfirmDeleteUser"
  [title]="'settingsConfirmModalTitle' | translate"
  width="20vw"
>
  <div class="modal-content">
    <div class="alert">
      <i
        class="pi pi-exclamation-triangle"
        style="color: #d71d1d; font-size: 2rem"
      ></i>
    </div>
    <p>{{ "IrreversibleAction" | translate }}</p>
  </div>
  <div class="buttons-modal">
    <shared-button
      [label]="'settingsConfirmModalAccept' | translate"
      (click)="deleteUser()"
    />
    <shared-button
      [label]="'settingsConfirmModalCancel' | translate"
      variant="secondary"
      (click)="toggleConfirmDeleteUser()"
    />
  </div>
</shared-modal>
